# This is technically a Makefile.
# Other Makefiles "include" the below.

# Executable assurance, please see doc in dir:
include nix

# The absolute version may introduce special chars that we can't escape in Make.
# So we limit the use of the second one to environment variables only.
clusterDir ?= ../.postgres-work
absClusterDir := $(shell realpath $(clusterDir))

mainDb ?= snowdrift
testDb ?= snowdrift_test
defaultDb ?= $(mainDb)


#
# Environment variables
#

# Ensures that Postgres executables are in the path, provided they're installed:
export PATH := $(shell pg_config --bindir):$(PATH)

# Needed by Yesod. Makes Postgres commands simpler, too:
export PGHOST := $(absClusterDir)
export PGDATA := $(absClusterDir)
export PGDATABASE := $(defaultDb)
